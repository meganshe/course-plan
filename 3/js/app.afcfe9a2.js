(function(e){function t(t){for(var n,i,a=t[0],u=t[1],c=t[2],p=0,f=[];p<a.length;p++)i=a[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var u=r[a];0!==o[u]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/course-plan/3/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1543:function(e,t,r){"use strict";r.r(t),r.d(t,"db",(function(){return i})),r.d(t,"auth",(function(){return a})),r.d(t,"currentUser",(function(){return u})),r.d(t,"usersCollection",(function(){return c})),r.d(t,"postsCollection",(function(){return l})),r.d(t,"commentsCollection",(function(){return p})),r.d(t,"likesCollection",(function(){return f}));var n=r("8aa5"),o=r.n(n);r("e71f");const s={apiKey:"AIzaSyDkKOpImjbjS2O0RhIQNJLQXx2SuYbxsfU",authDomain:"cornell-courseplan.firebaseapp.com",databaseURL:"https://cornell-courseplan.firebaseio.com",projectId:"cornell-courseplan",storageBucket:"",messagingSenderId:"1031551180906",appId:"1:1031551180906:web:bdcea6ec074e673ea72a13"};o.a.initializeApp(s);const i=o.a.firestore(),a=o.a.auth(),{currentUser:u}=a,c=i.collection("users"),l=i.collection("posts"),p=i.collection("comments"),f=i.collection("likes")},"56d7":function(e,t,r){"use strict";r.r(t);var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],i={},a=i,u=r("2877"),c=Object(u["a"])(a,o,s,!1,null,null,null),l=c.exports,p=r("8c4f"),f=r("8aa5"),h=r.n(f),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("transition",{attrs:{name:"fade"}},[e.performingRequest?n("div",{staticClass:"loading"},[n("p",[e._v("Loading...")])]):e._e()]),n("section",[e._m(0),n("div",{staticClass:"col2"},[n("form",{on:{submit:function(e){e.preventDefault()}}},[n("h1",[e._v("Welcome Back")]),n("div",{staticClass:"login-container"},[n("button",{staticClass:"social-button",on:{click:e.socialLogin}},[n("img",{attrs:{alt:"Google Logo",src:r("eebb")}})]),n("div",{staticClass:"login-description"},[e._v("Continue With Google Sign-In")])])])])])],1)},m=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col1"},[r("h1",[e._v("CoursePlan")]),r("p",[e._v("\n        Welcome to CoursePlan, your destination for creating plans surrounding your curriculum and\n        requirements\n      ")])])}];const g=r("1543");var b={data(){return{loginForm:{email:"",password:""},performingRequest:!1}},methods:{login(){this.performingRequest=!0,g.auth.signInWithEmailAndPassword(this.loginForm.email,this.loginForm.password).then(e=>{this.$store.commit("setCurrentUser",e),this.$store.dispatch("fetchUserProfile"),this.performingRequest=!1,this.$router.push("/dashboard")}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})},socialLogin(){this.performingRequest=!0;const e=new h.a.auth.GoogleAuthProvider;g.auth.signInWithPopup(e).then(e=>{this.$store.commit("setCurrentUser",e.user),this.$store.dispatch("fetchUserProfile"),this.performingRequest=!1,console.log(h.a.auth().currentUser),console.log(e.additionalUserInfo.profile),this.$router.push("/dashboard")}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})}}},v=b,_=Object(u["a"])(v,d,m,!1,null,null,null),y=_.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},P=[],U={},w=U,O=Object(u["a"])(w,C,P,!1,null,null,null),j=O.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},x=[],q={},$=q,I=Object(u["a"])($,S,x,!1,null,null,null),R=I.exports;n["a"].use(p["a"]);const k=new p["a"]({mode:"history",routes:[{path:"*",redirect:"/dashboard"},{path:"/login",name:"Login",component:y},{path:"/dashboard",name:"Dashboard",component:j,meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:R,meta:{requiresAuth:!0}}]});k.beforeEach((e,t,r)=>{const n=e.matched.some(e=>e.meta.requiresAuth),{currentUser:o}=h.a.auth();n&&!o?r("/login"):r()});var A=k,E=r("2f62");const L=r("1543");n["a"].use(E["a"]);const M=new E["a"].Store({state:{currentUser:null,userProfile:{}},actions:{fetchUserProfile({commit:e,state:t}){L.usersCollection.doc(t.currentUser.uid).get().then(t=>{e("setUserProfile",t.data())}).catch(e=>{console.log(e)})}},mutations:{setCurrentUser(e,t){e.currentUser=t},setUserProfile(e,t){e.userProfile=t}}});L.auth.onAuthStateChanged(e=>{e&&(M.commit("setCurrentUser",e),M.dispatch("fetchUserProfile"))});var W=M;r("7e7d");const D=r("1543");let F;n["a"].config.productionTip=!1,D.auth.onAuthStateChanged(()=>{F||(F=new n["a"]({el:"#app",router:A,store:W,render:e=>e(l)}))})},"7e7d":function(e,t,r){},eebb:function(e,t,r){e.exports=r.p+"img/google-logo.dad2164f.png"}});
//# sourceMappingURL=app.afcfe9a2.js.map